var temp_length,newSegInfo,popstate=!1,paginationStartArrIndex=5,paginationLimitIndex=10,start=0,catNameObject={},resultRows=10,newListObject={},playerReady=!1,vidPlayerObject="",redirectUrlIndex=0,ageFilterArr=[];function OnYTPlayerReady(){playerReady=!0}
$(function(){progressChange(75);"undefined"!=typeof page?(DisplayPage(page),contributeFlag||setHistoryState(),addPopStateListener(),renderStaticData(),renderActivePageData(page),setSearchBoxValue(),progressChange(80),setBreadCrumb()):(UI_bindFunction("#profilePageLink",goToAccountPage,"click"),UI_bindFunction("#headLogoutButton","logoutUser","click"));UI_createModal("#alert-box-container")});$(window).load(function(){progressChange(100)});
var DisplayPage=function(a){$(".section").css("display","none");$("body").scrollTop(0);page=a;switch(a){case "home":$("#sidebar").css("display","block");$("#moto").css("display","block");$("#home.section").css("display","block");$("#navPathArea").css("display","none");break;case "list":$("#sidebar").css("display","block");$("#list.section").css("display","block");$("#moto").css("display","none");$("#navPathArea").css("display","block");break;case "view":$("#sidebar").css("display","none");$("#view.section").css("display",
"block");$("#moto").css("display","none");$("#navPathArea").css("display","block");break;case "profile":$("#profile.section").css("display","block");$("#moto").css("display","none");$("#navPathArea").css("display","block");break;default:$("#moto").css("display","block"),$("#navPathArea").css("display","none"),$("#home.section").css("display","block")}},renderActivePageData=function(a){switch(a){case "home":renderHomeData();break;case "list":renderListData();break;case "view":renderViewData();break;
case "profile":renderProfileData();break;default:renderHomeData()}},renderStaticData=function(){var a=data.categories;UI_createJsonUL("#categorydropdown",{html:a});UI_createDropdown("#categorydropdown");createSubmenu();$('<li class="showLessCat"><a href="#">Show Less</a></li>').insertBefore($("#categorydropdown > ul").find("li:nth-child(7)"));$("#categorydropdown > ul").find("li:nth-child(n+7)").addClass("hiddenElem");$("#categorydropdown > ul").append('<li class="showMoreCat"><a href="#">Show more</a></li>');
$("#categorydropdown > ul .showMoreCat").click(function(a){showAllCat(a)});$("#categorydropdown > ul .showLessCat").click(function(a){hideAllCat(a)});$("#categorydropdown").on("mouseleave",hideAllCat);$("#categorydropdown > button").removeClass("btn-default").addClass("btn-link");$("#categorydropdown").on("hover click",function(a){toggleDropdown(this,1,a)},function(a){toggleDropdown(this,2,a)});UI_createTextBox("#headsearchinput");UI_postAddon("#headsearchinput","glyphicon-search",!1,"getKeywordMatch");
youtubeListFlag||UI_preAddon("#headsearchinput",'<div id="searchBoxCat" data-label="All Categories"></div>');a.splice(0,0,{link:"#",label:"All Categories"});UI_createJsonUL("#searchBoxCat",{html:a});a.splice(0,1);UI_createDropdown("#searchBoxCat");UI_createTabs("#profileItemsContainer",getProfileData);UI_bindFunction("#profilePageLink",goToAccountPage,"click");UI_bindFunction("#headLogoutButton","logoutUser","click");UI_bindFunction("#searchBoxCat ul.dropdown-menu a","setSearchCategory","click");
UI_bindFunction("#headsearchinput",getKeywordMatch,"keyup");UI_bindFunction("#headContributeButton","gotoCuration","click");UI_bindFunction("#headHomeButton","gotoHome","click");$("#headsearchinput").attr("list","searchData");UI_createModal("#sign-in-container","","","","resetSignUpOption",!1);UI_bindModalButton("#headLoginButton","#sign-in-container");$("#listContainer,#bookmarkListContainer").on("click",".list-item-row,.media-toggle-link.open,.media-toggle-link.closed",openContentInfo);UI_bindFunction("#categorydropdown li[data-catId] a",
showCategoryVideos,"click");UI_bindFunction("#categorydropdown li[data-catId] .subMenuExpand",showSubCategory,"click");UI_bindFunction("#categorydropdown li[data-catId] .subMenuCollapse",hideSubCategory,"click");$("#home").on("click",".categoryDesc",showCategoryVideos);$("#main").on("click",".cat-thumb img,.cat-thumb span.play-icon,.cat-thumb-title",categoryThumbnailAction);$("#listContainer").on("click",".tn_col img.list_tn, .toggle-container .list_title,.play-icon",function(a){contributeFlag?watchVideoCurate(a):
playVideo(a)});$("#bookmarkListContainer").on("click",".tn_col img.list_tn, .toggle-container .list_title,.play-icon",function(a){playUserBookmark(a)});$(".suggestionlist-container,.lastplayedlist-container").on("click","img.tn_suggestion, .list_title,.play-icon",playVideo);for(var b in a)catNameObject[a[b].attr["data-catid"]]=a[b].label,$("#recommendcategoryInput").append('<option value="'+a[b].attr["data-catid"]+'">'+a[b].label+"</option>");a=data.subCategories;for(b in a)for(var c=0;c<a[b].length;c++)catNameObject[a[b][c].attr["data-catid"]]=
a[b][c].label;a=data.languages;for(b in a)$("#language-select").append('<option value="'+b+'">'+a[b].language+"</option>");UI_bindFunction(".actionItem",showActiveUserVideoAction,"click");UI_bindFunction("#recommendCurationHomeBtn",showVideoRecommendInput,"click");UI_bindFunction("#submitRecommBtn",submitContentRecommendation,"click");UI_bindFunction("#recommendcategoryInput",toggleRecomNewCatInput,"change");UI_bindFunction(".sign-in-button",showSignInOption,"click");UI_createTabs("#viewLeftTabs");
$(".playListContainer").on("click","li",playVideoSegment);$("#smallScreenMenu").on("click",function(a){toggleSmallScreenControls("menu",!0)});$("#smallScreenSearch").on("click",function(a){toggleSmallScreenControls("search",!0)});$(".closeSearchSmallScreen").on("click",function(a){toggleSmallScreenControls("",!1)});$("#listcategories").on("click",".catfilteritem",filterListByCategory);UI_bindFunction("#language-select",filterListByLanguage,"change");UI_bindFunction(".age-filter",filterListByAge,"change");
$("#video-bookmark-table").on("click",".new-topic-icon",bindNewBookmarkIcon);$("#video-bookmark-table").on("click",".bookmark-undo-new-topic",bindCancelNewBookmarkIcon);$("#video-bookmark-table").on("click",".bookmark-topic-save",bindAddBookmarkTopic);$("#video-bookmark-table").on("click",".bookmark-topic-edit",bindEditBookmarkIcon);$("#video-bookmark-table").on("click",".bookmark-topic-remove",bindRemoveBookmarkTopic);$("#video-bookmark-table").on("click",".time-shift",bindShiftTimeInput);$("#save-bookmark").on("click",
saveBookmarkData);$("#play-bookmark").on("click",playContentThroughBookmark);$("#video-bookmark-table").on("click",".currentPTSInput",bindcurrentPTSTimeInput);$(".topics-time-input").on("keypress",numbersonly);$(".topics-time-input").on("blur",function(){check(this)});$(".indexSwitch").on("click",switchPlayingIndex);a=getListFromLocalStorage();contributeFlag||$(window).scroll(function(){35<(document.documentElement.scrollTop||document.body.scrollTop)?($("#head").addClass("scroll-active"),$("#listleft").addClass("fixed-ui"),
$("#listcenter").css("margin-left","16.6666%")):($("#head").removeClass("scroll-active"),$("#listleft").removeClass("fixed-ui"),$("#listcenter").css("margin-left","0px"))});UI_bindFunction("#editProfileInfo",editProfileInformation,"click");UI_bindFunction("#changePassword",changePasswordInformation,"click");UI_bindFunction("#saveProfileInfo",saveProfileInformation,"click");UI_bindFunction("#cancelEditProfileInfo",cancelEditProfileInformation,"click");for(b in a);},BindPaginationLinks=function(a){if($(a.target).closest("li").hasClass("disabled"))return a.preventDefault(),
!1;start=$(a.target).parent()[0].hasAttribute("data-pageindex")?10*$(a.target).parent().attr("data-pageindex"):$(a.target).closest("li").is(":first-child")?parseInt(start)-parseInt(resultRows):parseInt(start)+parseInt(resultRows);data.searchFlag?showCategoryVideos(a):searchKeyword(a);a.preventDefault()},BindPaginationLocalLinks=function(a){a.preventDefault()},getVideoCategoryName=function(a){return catNameObject[a]},getVideoSourceType=function(a){return restStr=-1!=a.indexOf("www.youtube.com")?"Youtube":
"default"},gotoCuration=function(){l_ch?location.href="./?page=list&request=curate":(redirectUrlIndex=1,UI_openModal("#sign-in-container"))},gotoHome=function(){location.href="./";return!0},getLocationUrl=function(a){if(0==a||""==a||null==a)return!0;var b="";switch(a){case 1:b="./?page=list&request=curate";break;default:b="./"}return b},preventClosing=function(a){window.location.href="./";return!1},setBreadCrumb=function(){var a=window.location.search;if(""==a)return!0;var a=a.replace("?",""),a=a.split("&"),
b={};$("#topBreadCrumbNav").find("li").not(":first-child").remove();for(var c=0;c<a.length;c++)b[a[c].split("=")[0]]=a[c].split("=")[1];switch(b.page){case "list":IsValueNull(b.category)?IsValueNull(b.search)||(IsValueNull(b.catfilter)?$("#topBreadCrumbNav").append('<li class="breadCrumbLink active"><span>'+decodeURIComponent(b.search)+"</span></li>"):$("#topBreadCrumbNav").append('<li class="breadCrumbLink" onclick="getKeywordMatch(event);"><span>'+decodeURIComponent(b.search)+'</span></li><li class="breadCrumbLink active"><span>'+
getVideoCategoryName(b.catfilter)+"</span></li>")):$("#topBreadCrumbNav").append('<li class="breadCrumbLink active"><span>'+getVideoCategoryName(b.category)+"</span></li>");break;case "view":IsValueNull(b.category)?IsValueNull(b.search)||$("#topBreadCrumbNav").append('<li class="breadCrumbLink" onclick="getKeywordMatch(event);"><span>'+decodeURIComponent(b.search)+"</span></li>"):$("#topBreadCrumbNav").append('<li class="breadCrumbLink" onclick="showCategoryVideos(event);"><span>'+getVideoCategoryName(b.category)+
"</span></li>"),$("#topBreadCrumbNav").append('<li class="breadCrumbLink active"><span>'+contentObj[data.videoID].string+"</span></li>")}},toggleSmallScreenControls=function(a,b){b?($("#headlogo").css("display","none"),$(".smallScreenComponent").css("opacity",0),"search"==a?$("#headsearch").css("opacity","0").removeClass("hidden-xs").animate({opacity:"1"},300):"menu"==a&&$("#headbutton,#headcategory").css("opacity","0").removeClass("hidden-xs").animate({opacity:"1"},300)):($("#headlogo").css("display",
"block"),$(".smallScreenComponent").css("opacity",1),$("#headsearch,#headcategory,#headbutton").animate({opacity:"1"},300).addClass("hidden-xs").css("opacity","0"))},showAllCat=function(a){$("#categorydropdown >ul>li.showLessCat").css("display","list-item");$("#categorydropdown >ul>li.hiddenElem").removeClass("hiddenElem");$("#categorydropdown >ul>li.showMoreCat").css("display","none");a.preventDefault();a.stopPropagation();return!1},hideAllCat=function(a){$("#categorydropdown >ul>li.showLessCat").css("display",
"none");$("#categorydropdown >ul").find("li:nth-child(n+7):not(.showMoreCat)").addClass("hiddenElem");$("#categorydropdown >ul>li.showMoreCat").css("display","list-item");a.preventDefault();a.stopPropagation();return!1},createSubmenu=function(){var a=data.subCategories,b;for(b in a){var c=$('#categorydropdown ul.dropdown-menu li[data-catid="'+b+'"]');c.find("a").addClass("dropdown-toggle").attr("data-toggle","dropdown");c.addClass("dropdown-submenu").append('<div class="subMenuExpand visible-xs visible-sm"><span class="glyphicon glyphicon-chevron-down"></div><div class="subMenuCollapse hiddenElem visible-xs visible-sm"><span class="glyphicon glyphicon-chevron-up"></span></div><ul class="dropdown-menu"></ul>');
for(var d=0;d<a[b].length;d++)c.find("ul.dropdown-menu").append('<li data-catId="'+a[b][d].attr["data-catid"]+'" data-vidId="'+a[b][d].attr["data-vidId"]+'"><a href="'+a[b][d].link+'">'+a[b][d].label+"</a></li>")}},unloadCurrentVideo=function(){vidPlayerObject.playerHandle&&vidPlayerObject.currentVideoID&&(vidPlayerObject.UnloadVideo(),data.videoID="")},showSignInOption=function(){UI_openModal("#sign-in-container")},goToAccountPage=function(){location.href="./?page=profile"};