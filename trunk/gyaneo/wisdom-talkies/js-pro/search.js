function getListData(a){var b=new CommonUtils.remoteCallClass;a=parseQueryStringToObject(a);a.server="opensearch";b.requestData={request:"search_data",data:a};b.asyncPostRequest("./"+dataRequestURL,ListRequestCallback);UI_blockInterface()}
var ListRequestCallback=function(a){progressChange(70);a=JSON.parse(a);if(validateAppResponse(a)){youtubeListFlag=!1;var b=data.list.ytList;a=a.data;data.list=a;data.list.ytList=b;delete b;data.searchYT?renderSearchListOnDataReady():(renderListData(),progressChange(100))}},getKeywordYoutubeResult=function(a){data.list.ytList={};a=new CommonUtils.remoteCallClass;a.requestData={request:"search_data",data:{server:"youtube",getData:"list",rows:50,search:$("#headsearchinput").val()}};a.asyncPostRequest("./"+
dataRequestURL,KeywordYoutubeCallback)},KeywordYoutubeCallback=function(a){a=JSON.parse(a);validateAppResponse(a)&&(data.list.ytList.list=a.data)},searchKeyword=function(a){data.searchFlag=!1;getSearchData("keyword","",a)},setSearchCategory=function(a){var b=$(a.target).closest("li").attr("data-catid");data.searchCategory=0;b&&(data.searchCategory=b);$("#searchBoxCat button").attr("catfilter",data.searchCategory).html($(a.target).closest("li").text()+"<span class='caret'></span>");a.preventDefault()},
getKeywordMatch=function(a){if(13==a.keyCode||$(a.currentTarget).hasClass("input-group-addon")||$(a.currentTarget).hasClass("breadCrumbLink")){if(""==$("#headsearchinput").val())return!1;start=0;contributeFlag||getKeywordYoutubeResult(a);data.searchYT=!0;resetListFilters(a);searchKeyword(a)}else 41>a.keyCode&&37<a.keyCode||searchAutocomplete($(a.target).val())},setSearchBoxValue=function(){var a=window.location.search.split("&search=")[1];a?(a=a.split("&")[0],$("#headsearchinput").val(decodeURI(a))):
$("#headsearchinput").val("")};function searchAutocomplete(a){a=a.trim();if(""==a)return!1;urlStr="getData=autocomplete";a&&(urlStr+="&search="+encodeURIComponent(a));var b="./"+dataRequestURL,d="opensearch";contributeFlag&&(d="youtube");var e=new CommonUtils.remoteCallClass;e.requestData={request:"search_data",data:{getData:"autocomplete",server:d,search:encodeURIComponent(a)}};e.asyncPostRequest(b,autoCompleteRequestCallback)}
var autoCompleteRequestCallback=function(a){a=JSON.parse(a);if(validateAppResponse(a)){a=a.data;if(""==a||null==a)return!1;$("#searchData").html("");if(!a.terms)return!1;for(var b=0;b<a.terms.length;b++)$("#searchData").append("<option>"+a.terms[b]+"</option>")}},showCategoryVideos=function(a,b){progressChange(10);$(a.target).closest("[data-catId]").attr("data-catid")&&(start=0,resetListFilters(a),$("#headsearchinput").val(""));data.lastSearchCat=$(a.target).closest("[data-catId]").attr("data-catid")||
data.lastSearchCat;data.searchFlag=!0;getSearchData("category",data.lastSearchCat,a,b)},getSearchData=function(a,b,d,e){$("#listContainer").html("");progressChange(20);$("#headsearchinput").blur();if("keyword"==a)var c=$("#headsearchinput").val();else"category"==a&&(c=b);if(""==c||null==c||void 0==c)return!1;e||(page="list");popstate=!0;urlStr="getData=list";urlParamStr="";c&&("keyword"==a?(urlParamStr+="&search="+encodeURIComponent(c),!$(d.currentTarget).hasClass("input-group-addon")&&"headsearchinput"!=
$(d.currentTarget).attr("id")||IsValueNull($("#searchBoxCat >button").attr("catfilter"))||"0"==$("#searchBoxCat >button").attr("catfilter")||(urlParamStr+="&catfilter="+$("#searchBoxCat > button").attr("catfilter"))):"category"==a&&(urlParamStr+="&category="+encodeURIComponent(c)));data.listFilter.category&&(urlParamStr+="&catfilter="+data.listFilter.category);data.listFilter.language&&(urlParamStr+="&langfilter="+data.listFilter.language);data.listFilter.age&&(urlParamStr+="&agefilter="+data.listFilter.age);
0!=start&&(urlParamStr+="&start="+start);contributeFlag?(urlParamStr+="&request=curate",getYoutubeListData(urlStr+urlParamStr)):getListData(urlStr+urlParamStr);if(e)return!0;progressChange(30);DisplayPage(page);progressChange(40);setHistoryData();toggleSmallScreenControls("",!1);d.preventDefault()};