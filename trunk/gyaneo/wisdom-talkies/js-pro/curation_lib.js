var curate_libs=function(){this.issue=this.id=this.ajax_url=this.source=this.topic_info=this.items=this.age=this.keywords=this.language=this.other_language=this.other_category=this.category=this.description=this.title=null;this.ytduration_to_sec=function(b){var a=b.replace("PT","").split("H"),c;2>a.length?b=0:(b=parseInt(a[0]),a.splice(0,1));a=a[0];a=a.split("M");2>a.length?c=0:(c=parseInt(a[0]),a.splice(0,1));a=a[0];a=a.split("S");a=2>a.length?0:parseInt(a[0]);return 60*(60*b+c)+a};this.save_curation=
function(b,a){if(0==a){if(null==(this.ajax_url&&this.source&&this.topic_info&&this.title&&this.category&&this.description&&this.language&&this.age&&this.keywords&&this.items&&this.other_language&&this.other_category))return!1;var c=this.ajax_url+"?request=curation_save",e={data:{source:this.source,videoID:vidPlayerObject.videoID,topicInfo:this.topic_info,title:this.title,category:this.category,description:this.description,language:this.language,age:this.age,keywords:this.keywords,items:this.items,
other_language:this.other_language,other_category:this.other_category}}}else if(3==a){if(null==(this.ajax_url&&this.topic_info&&this.title&&this.category&&this.description&&this.language&&this.age&&this.keywords&&this.items&&this.other_language&&this.other_category&&this.id))return!1;c=this.ajax_url+"?request=review_moderator_issue";e={data:{id:this.id,content_json:this.topic_info,title:this.title,category:this.category,description:this.description,language:this.language,age:this.age,keywords:this.keywords,
items:this.items,other_language:this.other_language,other_category:this.other_category}}}else if(1==a){if(null==this.ajax_url)return!1;c=this.ajax_url+"?request=curation_final_save";e={data:{videoID:vidPlayerObject.videoID}}}else if(2==a){if(null==(this.ajax_url&&this.issue&&this.id))return!1;c=this.ajax_url+"?request=review_reviewer_issue";e={data:{id:this.id,issue:this.issue}}}else if(5==a){if(null==(this.ajax_url&&this.issue&&this.id))return!1;c=this.ajax_url+"?request=review_moderator_reject";
e={data:{id:this.id,issue:this.issue}}}else if(4==a){if(null==(this.ajax_url&&this.id))return!1;c=this.ajax_url+"?request=review_publish";e={data:{id:this.id}}}$.ajax({url:c,type:"POST",data:e,async:!0}).done(function(a){a=JSON.parse(a);on_ajax_response(b,a)})};this.add_new_topic=function(b,a,c,e){if(playerReady){var d=$(".editRow").attr("id_row"),f=$("[id_row]").length;void 0!=d&&this.correct_the_timings(0,d,f);$("#curateScrollContainer .curationTablebody .curationRow").removeClass("playActive");
d=$("<div class='curationRow'>");f=$("<div class='curationCell'></div>");d.append($("<div class='curationCell'><span>"+(null!=b?b:"")+"</span></div>"));d.append($("<div class='curationCell start_time'><span>"+(null!=a?a:"")+"</span></div>"));d.append($("<div class='curationCell end_time'><span>"+(null!=c?c:"")+"</span></div>"));d.append(f.clone().attr("data-content","&#9998;"));d.append($("<div class='curationCell'><span></span></div>"));d.append($("<div class='curationCell'><span></span></div>"));
d.append($("</div>"));$("#curateScrollContainer .curationTablebody").append(d);rows=$("#curateScrollContainer .curationTablebody .curationRow").length;for($i=0;$i<rows;$i++)$($("#curateScrollContainer .curationTablebody .curationRow")[$i]).attr("id_row",$i+1);vidPlayerObject.Pause();$(".curationTablebody .curationRow").removeClass("editRow");$(".curationTablebody .curationRow:last-child").addClass("editRow");$(".curationTablebody").find('[contenteditable="true"]').attr("contenteditable",!1);$(".curationTablebody .curationRow:last-child span:lt(4)").attr("contenteditable",
!0);null!=e?e():""}};this.correct_the_timings=function(b,a,c){response={};0==b?(temp_id=a,temp_total_id=c):(temp_id=$(b.target).parent().attr("id_row"),temp_total_id=$total_child=$(b.target).parent().parent().children().last().attr("id_row"));raw_temp_starttime=$("[id_row='"+temp_id+"']").find(".start_time").text();raw_temp_endtime=$("[id_row='"+temp_id+"']").find(".end_time").text();if(""==raw_temp_endtime||""==raw_temp_starttime)response.is_row_null=1;num_temp_endtime=Number(raw_temp_endtime);num_temp_starttime=
Number(raw_temp_starttime);if(isNaN(num_temp_endtime)||isNaN(num_temp_starttime))response.is_row_nan=1;num_temp_starttime==num_temp_endtime&&""!=raw_temp_starttime?(num_temp_endtime=(parseFloat(num_temp_endtime)+.1).toFixed(1),$("[id_row='"+temp_id+"']").find(".end_time span").text(num_temp_endtime),response.is_row_edited=1):num_temp_starttime>num_temp_endtime&&""!=raw_temp_starttime&&""!=raw_temp_endtime&&(num_temp_endtime=(parseFloat(num_temp_starttime)+.1).toFixed(1),$("[id_row='"+temp_id+"']").find(".end_time span").text(num_temp_endtime),
response.is_row_edited=1);if(temp_id!=temp_total_id)return 1==temp_id?(num_temp_endtime=Number($("[id_row=1]").find(".end_time").text()),num_temp_another_starttime=Number($("[id_row=2]").find(".start_time").text()),raw_temp_endtime=$("[id_row=1]").find(".end_time").text(),raw_temp_another_starttime=$("[id_row=2]").find(".start_time").text(),num_temp_endtime>num_temp_another_starttime&&""!=raw_temp_another_starttime&&""!=raw_temp_endtime?(num_temp_starttime=(parseFloat(num_temp_endtime)+.1).toFixed(1),
$("[id_row=2]").find(".start_time span").text(num_temp_starttime)):num_temp_endtime==num_temp_another_starttime&&""!=raw_temp_another_starttime&&(num_temp_starttime=Number($("[id_row=1]").find(".end_time").text()),num_temp_starttime=Number((parseFloat(num_temp_starttime)+.1).toFixed(1)),$("[id_row=2]").find(".start_time span").text(num_temp_starttime))):(raw_temp_endtime=$("[id_row='"+temp_id+"']").find(".end_time").text(),raw_temp_another_endtime=$("[id_row='"+(temp_id-1)+"']").find(".end_time").text(),
raw_temp_starttime=$("[id_row='"+temp_id+"']").find(".start_time").text(),raw_temp_another_starttime=$("[id_row='"+(Number(temp_id)+1)+"']").find(".start_time").text(),num_temp_endtime=Number(raw_temp_endtime),num_temp_another_endtime=Number(raw_temp_another_endtime),num_temp_starttime=Number(raw_temp_starttime),num_temp_another_starttime=Number(raw_temp_another_starttime),num_temp_endtime>num_temp_another_starttime&&""!=raw_temp_another_starttime&&""!=raw_temp_endtime?(num_temp_endtime=Number((parseFloat(num_temp_endtime)+
.1).toFixed(1)),$("[id_row='"+(Number(temp_id)+1)+"']").find(".start_time span").text(num_temp_endtime)):num_temp_endtime==num_temp_another_starttime&&""!=raw_temp_another_starttime&&""!=raw_temp_endtime&&(num_temp_endtime=Number($("[id_row='"+temp_id+"']").find(".end_time").text()),num_temp_endtime=Number((parseFloat(num_temp_endtime)+.1).toFixed(1)),$("[id_row='"+(Number(temp_id)+1)+"']").find(".start_time span").text(num_temp_endtime)),num_temp_starttime<num_temp_another_endtime&&""!=raw_temp_another_endtime&&
""!=raw_temp_starttime?(num_temp_another_endtime=Number((parseFloat(num_temp_starttime)-.1).toFixed(1)),$("[id_row='"+(temp_id-1)+"']").find(".end_time span").text(num_temp_another_endtime)):num_temp_starttime==num_temp_another_endtime&&""!=raw_temp_another_endtime&&""!=raw_temp_starttime&&(num_temp_starttime=Number($("[id_row='"+temp_id+"']").find(".start_time").text()),num_temp_starttime=Number((parseFloat(num_temp_starttime)-.1).toFixed(1)),$("[id_row='"+(temp_id-1)+"']").find(".end_time span").text(num_temp_starttime))),
response;if(temp_id==temp_total_id){if(1!=temp_id)return raw_temp_starttime=$("[id_row='"+temp_id+"']").find(".start_time").text(),raw_temp_endtime=$("[id_row='"+(temp_id-1)+"']").find(".end_time").text(),num_temp_starttime=Number(raw_temp_starttime),num_temp_endtime=Number(raw_temp_endtime),raw_temp_time=Number($("[id_row='"+temp_id+"']").find(".end_time").text()),""==raw_temp_time&&$("[id_row='"+temp_id+"']").find(".end_time span").text(duration),num_temp_starttime<num_temp_endtime&&""!=raw_temp_endtime&&
""!=raw_temp_starttime?(num_temp_endtime=Number((parseFloat(num_temp_starttime)-.1).toFixed(1)),$("[id_row='"+(temp_id-1)+"']").find(".end_time span").text(num_temp_endtime)):num_temp_starttime==num_temp_endtime&&""!=raw_temp_endtime&&(num_temp_starttime=Number($("[id_row='"+temp_id+"']").find(".start_time").text()),num_temp_starttime=Number((parseFloat(num_temp_starttime)-.1).toFixed(1)),$("[id_row='"+(temp_id-1)+"']").find(".end_time span").text(num_temp_starttime)),response;if(1==temp_id)return raw_temp_starttime=
$("[id_row='"+temp_id+"']").find(".start_time").text(),raw_temp_endtime=$("[id_row='"+temp_id+"']").find(".end_time").text(),""==raw_temp_endtime&&$("[id_row='"+temp_id+"']").find(".end_time span").text(duration),""==raw_temp_starttime&&$("[id_row='"+temp_id+"']").find(".start_time span").text("0.0"),response}};this.encode_json_data=function(b){b=b.replace(/<div>/g,"\\\\n");b=b.replace(/<\/div>/g,"\\\\n");b=b.replace(/\\/g,"\\\\");return b=b.replace(/\"/g,'\\"')};this.save_topics=function(){var b=
{topic_info:[]};b.topic_info[0]={topic:$("#curate_title").val(),start_time:0,end_time:duration};var a=$(".curationTablebody .curationRow").length;for(i=1;i<=a;i++){var c=$(".curationTablebody .curationRow:nth-child("+i+")");b.topic_info[i-1]={};b.topic_info[i-1].topic=this.encode_json_data($(c.children().children()[0]).html());b.topic_info[i-1].start_time=$(c.children().children()[1]).html();b.topic_info[i-1].end_time=$(c.children().children()[2]).html()}return JSON.stringify(b)};sSegmentInfo=function(){sSegmentInfo.prototype.videoID=
0;sSegmentInfo.prototype.segmentList=0};this.CreateSegment=function(b,a){var c=this.save_topics();segmentdetails=JSON.parse(c);length=segmentdetails.topic_info.length;var e=new sSegmentInfo;e.videoID=a?a:"undefined"!=typeof currentCurationVidId?currentCurationVidId:vidPlayerObject.videoID;e.segmentList=[];if(1!=b)for(i=0;i<length;i++){var d=new sVideoSegment;d.startTime=segmentdetails.topic_info[i].start_time;d.endTime=segmentdetails.topic_info[i].end_time;d.topicText=segmentdetails.topic_info[i].topic;
e.segmentList.push(d)}else d=new sVideoSegment,d.startTime=segmentdetails.topic_info[0].start_time,d.endTime=segmentdetails.topic_info[0].end_time,d.topicText=segmentdetails.topic_info[0].topic,e.segmentList.push(d);return[e,c]}};